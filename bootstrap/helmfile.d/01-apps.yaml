---
# yaml-language-server: $schema=https://json.schemastore.org/helmfile

helmDefaults:
  cleanupOnFail: true
  wait: true
  waitForJobs: true

releases:
  - name: cert-manager
    namespace: cert-manager
    chart: oci://quay.io/jetstack/charts/cert-manager
    version: v1.19.1
    values:
      - ../values.yaml.gotmpl

  - name: flux-operator
    namespace: flux-system
    chart: oci://ghcr.io/controlplaneio-fluxcd/charts/flux-operator
    version: 0.33.0
    values:
      - ../values.yaml.gotmpl
    needs:
      - cert-manager/cert-manager

#  - name: flux-instance
#    namespace: flux-system
#    chart: oci://ghcr.io/controlplaneio-fluxcd/charts/flux-instance
#    version: 0.33.0
#    values:
#      - ../values.yaml.gotmpl
#    needs:
#      - flux-system/flux-operator
